<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Your Cart | Élan Scents</title>

<style>
body{
  margin:0;
  font-family:Georgia,serif;
  background:#000;
  color:#fff;
}

/* NAV */
nav{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:20px 50px;
  background:#000;
}
nav a{
  text-decoration:none;
  color:#f4c542;
  font-size:1.6rem;
  font-weight:bold;
}

/* CART */
.container{
  max-width:1100px;
  margin:60px auto;
  padding:0 20px;
}

h1{
  font-size:2.5rem;
  margin-bottom:40px;
}

.cart-item{
  display:flex;
  gap:20px;
  align-items:center;
  background:#111;
  padding:20px;
  border-radius:15px;
  margin-bottom:20px;
}

.cart-item img{
  width:100px;
  height:100px;
  object-fit:cover;
  border-radius:10px;
  border:2px solid #f4c542;
}

.cart-item-info{
  flex:1;
}

.cart-item-info h3{
  margin:0 0 10px;
}

.cart-item-info p{
  margin:0;
  color:#ccc;
}

.cart-item button{
  background:none;
  border:none;
  color:#ff3e3e;
  font-size:1.5rem;
  cursor:pointer;
}

/* TOTAL */
.total-box{
  margin-top:40px;
  padding:25px;
  background:#111;
  border-radius:15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.checkout-btn{
  background:#f4c542;
  color:#000;
  border:none;
  padding:15px 40px;
  border-radius:10px;
  font-size:1.1rem;
  font-weight:bold;
  cursor:pointer;
}

/* EMPTY */
.empty{
  text-align:center;
  color:#666;
  margin-top:80px;
}

/* PAYMENT MODAL */
#paymentModal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:1000;
  overflow-y:auto;
}

.modal-content{
  background:#111;
  padding:30px;
  border-radius:15px;
  width:320px;
  text-align:center;
  position:relative;
}

.modal-content h2{
  color:#f4c542;
  margin-bottom:20px;
}

/* FORM FIELDS */
.modal-content input, .modal-content textarea, .modal-content select{
  width:100%;
  padding:12px;
  margin:10px 0;
  border-radius:10px;
  border:none;
  font-size:1rem;
}

/* PAYMENT OPTIONS */
.payment-option{
  width:100%;
  padding:15px;
  margin:10px 0;
  border:none;
  border-radius:10px;
  background:#222;
  color:#fff;
  cursor:pointer;
}

.payment-option:hover{
  background:#f4c542;
  color:#000;
}

/* CLOSE BUTTON */
.close-btn{
  position:absolute;
  top:10px;
  right:15px;
  background:none;
  border:none;
  color:#ff3e3e;
  font-size:1.5rem;
  cursor:pointer;
}

@media(max-width:700px){
  .cart-item{flex-direction:column;align-items:flex-start}
  .cart-item img{width:100%}
  .total-box{flex-direction:column;gap:20px}
  .modal-content{width:90%}
}
</style>
</head>
<body>

<nav>
  <a href="index.html">Élan Scents</a>
</nav>

<div class="container">
  <h1>Your Cart</h1>
  <div id="cartItems"></div>

  <div class="total-box" id="totalBox" style="display:none">
    <h2>Total: EGP<span id="totalPrice">0</span></h2>
    <button class="checkout-btn" id="checkoutBtn">Proceed to Payment</button>
  </div>
</div>

<!-- PAYMENT MODAL -->
<div id="paymentModal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeModal()">&times;</button>
    <h2>Order Details</h2>

    <input type="text" id="customerName" placeholder="Your Name" required>
    <textarea id="customerAddress" placeholder="Your Address" rows="3" required></textarea>
    <input type="tel" id="customerPhone" placeholder="Your Phone Number" required>

    <h2>Payment Method</h2>
    <select id="paymentMethod">
      <option value="Cash on Delivery">Cash on Delivery</option>
      <option value="Instapay">Instapay</option>
      <option value="Wallet">Wallet</option>
    </select>

    <button class="payment-option" onclick="submitOrder()">Submit Order</button>
  </div>
</div>

<script>
const KEY="elan_scents_cart"
const cartItemsDiv=document.getElementById("cartItems")
const totalBox=document.getElementById("totalBox")
const totalPriceEl=document.getElementById("totalPrice")
const paymentModal=document.getElementById("paymentModal")

const getCart=()=>JSON.parse(localStorage.getItem(KEY)||"[]")
const saveCart=c=>localStorage.setItem(KEY,JSON.stringify(c))

function renderCart(){
  const cart=getCart()
  cartItemsDiv.innerHTML=""
  let total=0

  if(!cart.length){
    cartItemsDiv.innerHTML="<div class='empty'>Your cart is empty</div>"
    totalBox.style.display="none"
    return
  }

  cart.forEach((item,i)=>{
    total+=item.price
    cartItemsDiv.innerHTML+=`
      <div class="cart-item">
        <img src="${item.img}">
        <div class="cart-item-info">
          <h3>${item.name}</h3>
          <p>$${item.price}</p>
        </div>
        <button onclick="removeItem(${i})">&times;</button>
      </div>
    `
  })

  totalPriceEl.textContent=total
  totalBox.style.display="flex"
}

function removeItem(i){
  const cart=getCart()
  cart.splice(i,1)
  saveCart(cart)
  renderCart()
}

document.getElementById("checkoutBtn").onclick=()=>{ paymentModal.style.display="flex" }
function closeModal(){ paymentModal.style.display="none" }

function submitOrder(){
  const cart=getCart()
  const name=document.getElementById("customerName").value
  const address=document.getElementById("customerAddress").value
  const phone=document.getElementById("customerPhone").value
  const method=document.getElementById("paymentMethod").value

  if(!name||!address||!phone){
    alert("Please fill all the fields!")
    return
  }

  let msg=`New Order (%0APayment Method: ${method})%0A%0AName: ${name}%0APhone: ${phone}%0AAddress: ${address}%0A%0AOrder Details:%0A`
  let total=0
  cart.forEach(i=>{
    msg+=`- ${i.name} : $${i.price}%0A`
    total+=i.price
  })
  msg+=`%0ATotal: $${total}`

  window.open(`https://wa.me/201225705050?text=${msg}`,"_blank")

  localStorage.removeItem(KEY)
  renderCart()
  closeModal()
}

renderCart()
</script>

</body>
</html>
